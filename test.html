<!doctype html>
<html>
<head>
    <meta character="UTF-8" />
    <title>test</title>
    <style>
        /*table, table tr td {border:1px solid black}*/
        .style0 {
            border: 1px solid red;
            border-collapse: collapse;
        }

        /*.style1 {
            border: 1px solid blue;
        }

        .bg {
            background-color: aquamarine;
        }*/
    </style>
</head>

<body>
    <!--<button onclick="changeStyle()">改样式</button>-->
    <button onclick="createTable(20,20)">创建表格</button>
    <!--<table   height="200" width="50%" onclick="changeStyle()" border="1" id="mytable">
        <tr>
            <td colspan="2">年份</td>
            <td colspan="2">数量</td>
        </tr>
        <tr>
            <td>2017</td>
            <td>2018</td>
            <td>总数</td>
            <td>平均</td>
        </tr>
        <tr>
            <td class="style1">80</td>
            <td class="style1">20</td>
            <td class="style1">50</td>
            <td class="style1" rowspan="2">60</td>
        </tr>
        <tr>
            <td>30</td>
            <td>40</td>
            <td id="abc">70</td>
        </tr>
    </table>
    <table border="1" id="mytable2">
        <tr>
            <td colspan="2">年份</td>
            <td colspan="2">数量</td>
        </tr>
        <tr>
            <td>2017</td>
            <td>2018</td>
            <td>总数</td>
            <td>平均</td>
        </tr>
        <tr>
            <td class="style1">80</td>
            <td class="style1">20</td>
            <td class="style1">50</td>
            <td class="style1" rowspan="2">60</td>
        </tr>
        <tr>
            <td>30</td>
            <td>40</td>
            <td id="abc2">70</td>
        </tr>
    </table>-->
    <!--<script type="text/javascript">
        function changeStyle() {
            alert("HELLO");
            //var mytable = document.getElementById("mytable");
            var tables = document.getElementsByTagName("table");
            for (var i = 0; i < tables.length; i++) {
                var table = tables[i];
                table.style.backgroundColor = "silver";
                for (var j = 0; j < table.rows.length; j++) {
                    var row = table.rows[j];
                    for (var k = 0; k < row.cells.length; k++) {
                        var cell = row.cells[k];
                        cell.innerText = "*" + cell.innerText;
                    }
                }
            }
        }

        //var mytable = document.getElementsByTagName("table")[0];
        //mytable.className = "bg";
        //mytable.style.backgroundColor = "blue";
        var abc = document.getElementById("abc");
        abc.style.backgroundColor = "red";
        abc.style.color = "yellow";
        abc.style.fontSize = "20px";
    </script>-->
    <script type="text/javascript">

        var table = document.createElement("table");
        table.id = "MyTable";
        var tbody = document.createElement("tbody");
        function createTable(rows, columns) {

            table.setAttribute("border", 1);
            table.className = "style0";
            table.appendChild(tbody);

            for (var i = 0; i < rows ; i++) {
                var row = document.createElement("tr");
                tbody.appendChild(row);
                for (var j = 0; j < columns ; j++) {
                    var cell = document.createElement("td");
                    row.appendChild(cell);
                    cell.innerText = "__";
                    var max = rows - 1;
                    for (var k = -1; k < max / 2; k++) {
                        if (i == 2 * k && j <= max - 2 * k && j >= 2 * (k - 1)) {
                            cell.style.backgroundColor = "silver";
                        }
                        else if (i <= max - 2 * k && i >= 2 * k && j == max - 2 * k) {

                            cell.style.backgroundColor = "silver";
                        }
                        else if (i == max - 2 * k && j >= 2 * k && j < max - 2 * k) {

                            cell.style.backgroundColor = "silver";
                        }
                        else if (i >= 2 * (k + 2) - 1 && i <= max - 2 * k - 1 && j == 2 * k) {
                            cell.style.backgroundColor = "silver";
                        }
                    }
                }

            }
            document.body.appendChild(table);

            //var td = table.rows[rowIndex].cells[colIndex];
            //setcolor(null, td);

            //var p = new Position(rowIndex, colIndex);
            //path.push(p);
        }
        //var rowIndex = 1;
        //var colIndex = 0;
        //var path = [];

        //document.onkeydown = function (event) {
        //    if (null == event) {
        //        event = window.event;
        //    }
        //    else if (event.keyCode <= 40 && event.keyCode >= 37) {
        //        keytd(event.keyCode);
        //    }
        //}

        //function setcolor(oldtd, newtd) {
        //    if (oldtd)
        //        oldtd.style.backgroundColor = "";

        //    if (newtd)
        //        newtd.style.backgroundColor = "red";
        //}

        //function Position(rowIndex, colIndex) {
        //    this.rowIndex = rowIndex;
        //    this.colIndex = colIndex;
        //}
        //function keytd(key) {
        //    var table = document.getElementById("MyTable");
        //    var rowCount = table.rows.length;
        //    var cellCount = table.rows[0].cells.length;
        //    var tempRowIndex = rowIndex;
        //    var tempColIndex = colIndex;


        //    // 左
        //    if (key == 40) {
        //        path.pop();
        //        var p = path[path.length - 1];
        //        tempRowIndex = p.rowIndex;
        //        tempColIndex = p.colIndex;
        //    }
        //        // 右
        //    else if (key == 38) {
        //        var tempRowIndexPlus = tempRowIndex + 1;
        //        var tempRowIndexMinus = tempRowIndex - 1;
        //        var tempColIndexPlus = tempColIndex + 1;
        //        var tempColIndexMinus = tempColIndex - 1;

        //        var td1 = table.rows[tempRowIndexPlus].cells[colIndex];
        //        var td2 = table.rows[tempRowIndexMinus].cells[colIndex];
        //        var td3 = table.rows[rowIndex].cells[tempColIndexPlus];
        //        var td4 = table.rows[rowIndex].cells[tempColIndexMinus];

        //        var isTarget = false;
        //        if (!isTarget && td1 && td1.style.backgroundColor == "") {
        //            if (!target(tempRowIndexPlus, colIndex)) {
        //                tempRowIndex = tempRowIndexPlus;
        //                tempColIndex = colIndex;
        //                isTarget = true;
        //            }
        //        }

        //        if (!isTarget && td2 && td2.style.backgroundColor == "") {
        //            if (!target(tempRowIndexMinus, colIndex)) {
        //                tempRowIndex = tempRowIndexMinus;
        //                tempColIndex = colIndex;
        //                isTarget = true;
        //            }
        //        }

        //        if (!isTarget && td3 && td3.style.backgroundColor == "") {
        //            if (!target(rowIndex, tempColIndexPlus)) {
        //                tempRowIndex = rowIndex;
        //                tempColIndex = tempColIndexPlus;
        //                isTarget = true;
        //            }
        //        }

        //        if (!isTarget && td4 && td4.style.backgroundColor == "") {
        //            if (!target(rowIndex, tempColIndexMinus)) {
        //                tempRowIndex = rowIndex;
        //                tempColIndex = tempColIndexMinus;
        //                isTarget = true;
        //            }
        //        }
        //    }

        //    var newTd = table.rows[tempRowIndex].cells[tempColIndex];
        //    if (tempRowIndex == rowIndex && tempColIndex == colIndex)
        //        return;

        //    var oldTd = table.rows[rowIndex].cells[colIndex];
        //    setcolor(oldTd, newTd);
        //    rowIndex = tempRowIndex;
        //    colIndex = tempColIndex;

        //    if (key == 38) {
        //        var p = new Position(rowIndex, colIndex);
        //        path.push(p);
        //    }
        //}

        //function target(rowindex, colindex) {
        //    for (var i = 0; i < path.length; i++) {
        //        var p = path[i];
        //        if (p.rowIndex == rowindex && p.colIndex == colindex)
        //            return true;
        //    }
        //    return false;
        //}
    </script>
</body>
</html>